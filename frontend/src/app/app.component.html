<!-- Header moderno con barra de bÃºsqueda -->
<header class="header-modern" *ngIf="!isAdminRoute()">
  <div class="header-main">
    <div class="container">
      <div class="header-main-content">
        <div class="header-left">
          <div class="logo-modern" routerLink="/">
            <img src="/logoColumbia.png" alt="Columbia Logo" />
          </div>
          
          <div class="search-container">
            <form class="search-box" (ngSubmit)="onSearchSubmit()">
              <input type="text" name="search" [(ngModel)]="searchTerm" placeholder="Buscar productos, categorÃ­as..." class="search-input" (input)="onSearchInput()" (blur)="onSearchBlur()" />
              <button class="search-btn" type="submit">
                <span class="search-icon">ğŸ”</span>
              </button>
            </form>
            <div class="search-sugerencias" *ngIf="mostrarSugerencias">
              <div class="sugerencia-item" *ngFor="let sug of sugerencias" (mousedown)="onSugerenciaClick(sug)">
                <span *ngIf="sug.tipo === 'categoria'">ğŸ“‚ {{ sug.nombre }}</span>
                <span *ngIf="sug.tipo === 'producto'">ğŸ›ï¸ {{ sug.nombre }}</span>
              </div>
            </div>
          </div>
        </div>
        
        <nav class="nav-modern">
          <!-- CategorÃ­as dinÃ¡micas (mÃ¡ximo 5 en el encabezado) -->
          <ng-container *ngIf="categoriasCargadas && !errorCargarCategorias && categorias.length > 0">
            <a *ngFor="let categoria of categorias.slice(0, 5)" 
               [routerLink]="['/productos', getNombreCategoriaParaUrl(categoria.nombreCategoria)]" 
               class="nav-link-modern">
              <span class="nav-icon">
                <ng-container [ngSwitch]="categoria.nombreCategoria.toLowerCase()">
                  <span *ngSwitchCase="'camisetas'">ğŸ‘•</span>
                  <span *ngSwitchCase="'chalecos'">ğŸ¦º</span>
                  <span *ngSwitchCase="'pantalones'">ğŸ‘–</span>
                  <span *ngSwitchCase="'shorts'">ğŸ©³</span>
                  <span *ngSwitchCase="'accesorios'">ğŸ’</span>
                  <span *ngSwitchDefault>ğŸ·ï¸</span>
                </ng-container>
              </span>
              <span class="nav-text">{{ categoria.nombreCategoria }}</span>
            </a>
          </ng-container>
          
          <!-- Mensaje cuando no hay categorÃ­as o hay error -->
          <ng-container *ngIf="categoriasCargadas && (errorCargarCategorias || categorias.length === 0)">
            <div class="nav-link-modern disabled">
              <span class="nav-icon">âš ï¸</span>
              <span class="nav-text">CategorÃ­as no disponibles</span>
            </div>
          </ng-container>
          
          <!-- Loading mientras se cargan las categorÃ­as -->
          <ng-container *ngIf="!categoriasCargadas">
            <div class="nav-link-modern loading">
              <span class="nav-icon">â³</span>
              <span class="nav-text">Cargando...</span>
            </div>
          </ng-container>
          
          <div class="nav-promo">
            <span class="promo-text">ğŸ”¥ OFERTAS</span>
          </div>
        </nav>
        
        <div class="header-actions-modern">
          <button class="action-btn" [routerLink]="['/favoritos']" title="Favoritos">
            <span class="action-icon">â¤ï¸</span>
            <span class="action-label">Favoritos</span>
          </button>
          <button class="action-btn" title="Carrito">
            <span class="action-icon">ğŸ›’</span>
            <span class="action-label">Carrito</span>
            <span class="cart-badge">3</span>
          </button>
          
          <!-- BotÃ³n de cuenta cuando NO estÃ¡ logueado -->
          <button class="action-btn account-btn-modern" (click)="openLoginModal()" title="Mi cuenta" *ngIf="!isLoggedIn">
            <span class="action-icon">ğŸ‘¤</span>
            <span class="action-label">Mi cuenta</span>
          </button>
          
          <!-- BotÃ³n de perfil cuando estÃ¡ logueado como usuario normal -->
          <button class="action-btn account-btn-modern" (click)="openPerfilModal()" title="Perfil" *ngIf="isLoggedIn && !currentUser?.esAdminUsuario">
            <span class="action-icon">ğŸ‘¤</span>
            <span class="action-label">Perfil</span>
          </button>
          
          <!-- BotÃ³n de admin cuando estÃ¡ logueado como administrador -->
          <button class="action-btn account-btn-modern" routerLink="/admin" title="Panel de AdministraciÃ³n" *ngIf="isLoggedIn && currentUser?.esAdminUsuario">
            <span class="action-icon">âš™ï¸</span>
            <span class="action-label">Admin</span>
          </button>
          
          <!-- BotÃ³n de cerrar sesiÃ³n -->
          <button class="action-btn" (click)="logout()" title="Cerrar sesiÃ³n" *ngIf="isLoggedIn">
            <span class="action-icon">âŒ</span>
            <span class="action-label">Cerrar sesiÃ³n</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</header>

<!-- Router outlet para mostrar el contenido de las rutas -->
<router-outlet></router-outlet>

<!-- Footer moderno -->
<footer class="footer-modern" *ngIf="!isAdminRoute()">
  <div class="footer-main">
    <div class="container">
      <div class="footer-content-modern">
        <div class="footer-section">
          <div class="footer-logo-modern">
            <img src="/logoColumbia.png" alt="Columbia Logo" />
            <h3>Columbia Sportswear</h3>
          </div>
          <p class="footer-description">
            LÃ­der mundial en ropa y equipamiento deportivo. InnovaciÃ³n, calidad y rendimiento para todas tus aventuras.
          </p>
          <div class="footer-social-modern">
            <a href="#" class="social-link" title="Facebook">ğŸ“˜</a>
            <a href="#" class="social-link" title="Instagram">ğŸ“·</a>
            <a href="#" class="social-link" title="Twitter">ğŸ¦</a>
            <a href="#" class="social-link" title="YouTube">ğŸ“º</a>
            <a href="#" class="social-link" title="TikTok">ğŸµ</a>
          </div>
        </div>
        
        <div class="footer-section">
          <h4 class="footer-title">Productos</h4>
          <ul class="footer-links-modern">
            <li><a href="#">Ropa para Hombre</a></li>
            <li><a href="#">Ropa para Mujer</a></li>
            <li><a href="#">Ropa para NiÃ±os</a></li>
            <li><a href="#">Calzado</a></li>
            <li><a href="#">Accesorios</a></li>
            <li><a href="#">Equipamiento</a></li>
          </ul>
        </div>
        
        <div class="footer-section">
          <h4 class="footer-title">Newsletter</h4>
          <p class="newsletter-desc">SuscrÃ­bete para recibir ofertas exclusivas y novedades</p>
          <div class="newsletter-form-modern">
            <input type="email" placeholder="Tu email" class="newsletter-input" />
            <button class="newsletter-btn">Suscribirse</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="footer-bottom">
    <div class="container">
      <div class="footer-bottom-content">
        <div class="footer-legal">
          <a href="#" class="legal-link">PolÃ­tica de privacidad</a>
          <a href="#" class="legal-link">TÃ©rminos de servicio</a>
        </div>
        <div class="footer-copyright">
          <p>&copy; 2024 Columbia Sportswear. Todos los derechos reservados.</p>
        </div>
      </div>
    </div>
  </div>
</footer>

<!-- Modal de Login -->
<app-login-modal #loginModal></app-login-modal>

<!-- Modal de Perfil -->
<app-perfil-modal #perfilModal></app-perfil-modal>
