<div class="carrito-bg">
  <div class="carrito-container">
    <h2>üõí Mi Carrito</h2>
    <div *ngIf="!isLoggedIn" class="alerta-login">
      <p>Debes iniciar sesi√≥n para ver tu carrito.</p>
      <button (click)="openLogin()">Iniciar sesi√≥n</button>
    </div>
    <ng-container *ngIf="isLoggedIn">
      <table class="carrito-table" *ngIf="items.length > 0; else vacio">
        <thead>
          <tr>
            <th>Producto</th>
            <th>Cantidad</th>
            <th>Precio unitario</th>
            <th>Subtotal</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of items">
            <td>{{ item.producto.nombreProducto }}</td>
            <td>{{ item.cantidadItemCarrito }}</td>
            <td>S/ {{ item.producto.precioProducto | number:'1.2-2' }}</td>
            <td>S/ {{ (item.producto.precioProducto * item.cantidadItemCarrito) | number:'1.2-2' }}</td>
            <td><button (click)="eliminarItem(item)">‚ùå</button></td>
          </tr>
        </tbody>
      </table>
      <ng-template #vacio>
        <div class="carrito-vacio">Tu carrito est√° vac√≠o.</div>
      </ng-template>
      <div class="carrito-total" *ngIf="items.length > 0">
        <span>Total:</span>
        <span class="total-precio">${{ getTotal() | number:'1.2-2' }}</span>
      </div>
    </ng-container>
  </div>
  <div *ngIf="toastMsg" class="toast-carrito" [ngClass]="toastType">{{ toastMsg }}</div>
</div> 