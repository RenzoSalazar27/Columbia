<!-- Modal de Perfil -->
<div class="modal-overlay" *ngIf="isVisible">
  <div class="modal-container">
    <!-- BotÃ³n de cerrar -->
    <button class="close-btn" (click)="ocultarModal()">
      <span>&times;</span>
    </button>

    <!-- Contenido del modal -->
    <div class="modal-content">
      <!-- Logo y tÃ­tulo -->
      <div class="modal-header">
        <img src="/logoColumbia.png" alt="Columbia Logo" class="modal-logo" />
        <h2>Mi Perfil</h2>
        <p>Edita tu informaciÃ³n personal</p>
      </div>

      <!-- Mensaje de estado -->
      <div *ngIf="message" class="message-container">
        <div class="message" [class.error]="isError" [class.success]="!isError">
          {{ message }}
        </div>
      </div>

      <!-- Formulario -->
      <form class="perfil-form" (submit)="guardarCambios(); $event.preventDefault()">
        <!-- InformaciÃ³n personal -->
        <div class="form-section">
          <h3>ğŸ‘¤ InformaciÃ³n Personal</h3>
          
          <div class="form-row">
            <div class="form-group">
              <label for="nombre">Nombre</label>
              <input 
                type="text" 
                id="nombre" 
                name="nombre" 
                [(ngModel)]="formData.nombreUsuario"
                placeholder="Tu nombre" 
                required
              />
            </div>
            <div class="form-group">
              <label for="apellido">Apellido</label>
              <input 
                type="text" 
                id="apellido" 
                name="apellido" 
                [(ngModel)]="formData.apellidoUsuario"
                placeholder="Tu apellido" 
                required
              />
            </div>
          </div>

          <div class="form-group">
            <label for="telefono">ğŸ“ TelÃ©fono</label>
            <input 
              type="tel" 
              id="telefono" 
              name="telefono" 
              [(ngModel)]="formData.telefonoUsuario"
              placeholder="+51 999 999 999" 
              required
            />
          </div>

          <div class="form-group">
            <label for="email">ğŸ“§ Correo electrÃ³nico</label>
            <input 
              type="email" 
              id="email" 
              name="email" 
              [value]="usuario?.emailUsuario"
              placeholder="tu@email.com" 
              disabled
              class="disabled-input"
            />
            <small class="form-help">El correo electrÃ³nico no se puede modificar</small>
          </div>
        </div>

        <!-- Cambio de contraseÃ±a -->
        <div class="form-section">
          <h3>ğŸ”’ Cambiar ContraseÃ±a</h3>
          <p class="section-description">Deja en blanco si no quieres cambiar tu contraseÃ±a</p>
          
          <div class="form-group">
            <label for="contrasenaActual">ContraseÃ±a actual</label>
            <input 
              type="password" 
              id="contrasenaActual" 
              name="contrasenaActual" 
              [(ngModel)]="formData.contrasenaActual"
              placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" 
            />
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="nuevaContrasena">Nueva contraseÃ±a</label>
              <input 
                type="password" 
                id="nuevaContrasena" 
                name="nuevaContrasena" 
                [(ngModel)]="formData.nuevaContrasena"
                placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" 
              />
            </div>
            <div class="form-group">
              <label for="confirmarNuevaContrasena">Confirmar nueva contraseÃ±a</label>
              <input 
                type="password" 
                id="confirmarNuevaContrasena" 
                name="confirmarNuevaContrasena" 
                [(ngModel)]="formData.confirmarNuevaContrasena"
                placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" 
              />
            </div>
          </div>
        </div>

        <!-- Direcciones -->
        <div class="form-section">
          <h3>ğŸ“ Direcciones de Entrega</h3>
          <p class="section-description">Gestiona tus direcciones de entrega para pedidos</p>
          <button type="button" class="btn-agregar-direccion" (click)="agregarDireccion()">
            <span class="btn-icon">â•</span>
            Agregar direcciÃ³n
          </button>
        </div>

        <!-- Botones -->
        <div class="button-container">
          <button 
            type="button" 
            class="btn-cancelar" 
            (click)="ocultarModal()"
            [disabled]="isLoading">
            Cancelar
          </button>
          <button 
            type="submit" 
            class="btn-guardar" 
            [disabled]="isLoading">
            <span *ngIf="!isLoading">Guardar Cambios</span>
            <span *ngIf="isLoading" class="loading-spinner">Guardando...</span>
          </button>
        </div>
      </form>
    </div>
  </div>
</div> 